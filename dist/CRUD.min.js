!function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var f="function"==typeof require&&require;if(!a&&f)return f(s,!0);if(o)return o(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var r=t("./helper.js"),o=t("./StorageDriver.js"),s=i(o),a=function(t){this.conf=(0,r.extend)({name:"database",indexedKeys:[],uniqueKey:"id",driver:new s["default"]({name:t.name,storage:r.storage})},t||{}),this.initialize()};a.prototype.initialize=function(){this.data=this.load()||[],this.id=0,this.data.length>0&&(this.data=this.data.map(function(t){return parseInt(t,10)}),this.id=Math.max.apply(Math,this.data))},a.prototype.find=function(t){if("undefined"==typeof t)return this.findAll();var e=this.getKeys(t),n=[],i=void 0;for(var o in e.indexed)n.push(this.conf.driver.getItem(o+":"+e[0][o])||!1);return i=0===n.length?this.data:1===n.length?n[0]:r.intersect.apply(this,n),this.filter(this.select(i),e.unindexed)},a.prototype.findAll=function(){return this.select(this.data)},a.prototype.getKeys=function(t){var e={indexed:{},unindexed:{}};for(var n in t){var i=-1!==this.conf.indexedKeys.indexOf(n)?"indexed":"unindexed";e[i][n]=t[n]}return e},a.prototype.select=function(t){var e=this;return t=Array.isArray(t)?t:[t],t.map(function(t){return e.conf.driver.getItem(t)})},a.prototype.filter=function(t,e){return t.map(function(t){for(var n in e)if(t[n]!==e[n])return!1;return t}).filter(function(t){return t})},a.prototype.insert=function(t){if("object"!=typeof t||null===t)throw new Error("Can't insert "+t+". Please insert object.");return this.id++,-1===this.data.indexOf(this.id)?(t[this.conf.uniqueKey]=this.id,this.data.push(this.id),this.conf.driver.setItem(this.id,t),this.conf.driver.setItem("__data",this.data.join(",")),this.buildIndex(t),this.id):void 0},a.prototype.update=function(t,e){return-1!==this.data.indexOf(t)?(this.destroyIndex(t),e[this.conf.uniqueKey]=t,this.conf.driver.setItem(t,e),this.buildIndex(e),e):void 0},a.prototype["delete"]=function(t){if("object"==typeof t&&null!==t)this.findAndDelete(t);else if(-1!==this.data.indexOf(t))return this.data.splice(this.data.indexOf(t),1),this.destroyIndex(t),this.conf.driver.removeItem(t),this.conf.driver.setItem("__data",this.data.join(",")),-1===this.data.indexOf(t)},a.prototype.findAndDelete=function(t){for(var e=this.find(t),n=this.data.length,i=0;i<e.length;i++){var r=e[i][this.conf.uniqueKey];-1!==this.data.indexOf(r)&&(this.data.splice(this.data.indexOf(r),1),this.destroyIndex(r),this.conf.driver.removeItem(r),this.conf.driver.setItem("__data",this.data.join(",")))}return this.data.length<n},a.prototype.count=function(){return this.data.length},a.prototype.drop=function(){var t=this;return this.data.forEach(function(e){return t["delete"](e)}),this.conf.driver.removeItem("__data"),this.data.length=0,0===this.data.length},a.prototype.load=function(){return this.conf.driver.getItem("__data")?this.conf.driver.getItem("__data").split(","):null},a.prototype.buildIndex=function(t){for(var e in t)if(-1!==this.conf.indexedKeys.indexOf(e)){var n=[t[this.conf.uniqueKey]],i=e+":"+t[e],r=this.conf.driver.getItem(i);null!==r&&(r.push(t[this.conf.uniqueKey]),n=r),this.conf.driver.setItem(i,n)}},a.prototype.destroyIndex=function(t){var e=this.conf.driver.getItem(t);if(null!==e)for(var n in e)if(-1!==this.conf.indexedKeys.indexOf(n)){var i=n+":"+e[n],r=this.conf.driver.getItem(i);null!==r&&(r.splice(r.indexOf(t),1),0===r.length?this.conf.driver.removeItem(i):this.conf.driver.setItem(i,r))}},e.exports=a},{"./StorageDriver.js":2,"./helper.js":3}],2:[function(t,e,n){"use strict";var i=function(t){if(this.conf=t||{},"function"!=typeof this.conf.storage.getItem||"function"!=typeof this.conf.storage.removeItem||"function"!=typeof this.conf.storage.setItem)throw new Error("Given Storage doesn't have methods `getItem`, `setItem` and `removeItem`.")};i.prototype.setItem=function(t,e){return this.conf.storage.setItem(this.conf.name+":"+t,JSON.stringify(e))},i.prototype.getItem=function(t){return JSON.parse(this.conf.storage.getItem(this.conf.name+":"+t))},i.prototype.removeItem=function(t){return this.conf.storage.removeItem(this.conf.name+":"+t)},e.exports=i},{}],3:[function(t,e,n){"use strict";e.exports={extend:function(t,e){if(t=t||{},arguments.length>2)for(var n=1;n<arguments.length;n++)window.extend(t,arguments[n]);else for(var i in e)t[i]=e[i];return t},intersect:function(){var t,e,n,i,r,o,s=[],a={};for(o=arguments.length-1,n=arguments[0].length,e=0,t=0;o>=t;t++)i=arguments[t].length,n>i&&(e=t,n=i);for(t=0;o>=t;t++){i=t===e?0:t||e,r=arguments[i].length;for(var f=0;r>f;f++){var d=arguments[i][f];a[d]===t-1?t===o?(s.push(d),a[d]=0):a[d]=t:0===t&&(a[d]=0)}}return s},storage:function(){if("undefined"!=typeof localStorage)return localStorage;var t={};return{getItem:function(e){return t[e]||null},setItem:function(e,n){t[e]=n},removeItem:function(e){delete t[e]}}}}},{}]},{},[1]);